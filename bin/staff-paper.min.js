/*! Staff Paper - v0.1.0 - 2012-11-09
* Copyright (c) 2012 Eric Rubio; Licensed MIT */
var StaffPaper;window.StaffPaper=StaffPaper,function(){StaffPaper=function(e,t,n){n||(n={}),this.options=n,this.options.lineSpacing=parseInt(n.lineSpacing,10)||20,this.options.noteSpacing=parseInt(n.noteSpacing,10)||10,this.options.padding=parseInt(n.padding,10)||40,this.container_id=e,this.width=parseInt(t,10),this.height=this.options.lineSpacing*4+this.options.padding*2,this.notes=[],this.staves=[],this.ui={},this.paper=new Raphael(this.container_id,this.width,this.height),this.noteYMap={},this.noteYMap[1]={f:this.options.padding,e:this.options.padding+this.options.lineSpacing*.5,d:this.options.padding+this.options.lineSpacing,c:this.options.padding+this.options.lineSpacing*1.5},this.noteYMap[0]={b:this.options.padding+this.options.lineSpacing*2,a:this.options.padding+this.options.lineSpacing*2.5,g:this.options.padding+this.options.lineSpacing*3,f:this.options.padding+this.options.lineSpacing*3.5,e:this.options.padding+this.options.lineSpacing*4,d:this.options.padding+this.options.lineSpacing*4.5,c:this.options.padding+this.options.lineSpacing*5}},StaffPaper.prototype.addNote=function(t,n){this.notes.push(new e(t))},StaffPaper.prototype.addStaff=function(e,n){this.staves.push(new t(e,n))},StaffPaper.prototype.getYPosForNote=function(e,t){return this.noteYMap[t][e.toLowerCase()]},StaffPaper.prototype.draw=function(){if(this.paper!==undefined)throw new Error("Call init() only once");var e="";for(var t=0,n=this.options.padding;t<5;t++,n+=this.options.lineSpacing)e+="M0 "+n.toString()+"L"+this.width+" "+n.toString();this.ui.bg=this.paper.rect(0,0,this.width,this.height,4).attr({fill:"#efefef",stroke:"none"})},StaffPaper.prototype.clear=function(){this.notes=[],this.staves=[],this.ui={},this.paper.clear()};var e=function(e,t,n){this.name=e||"",this.value=parseInt(t,10)||4,this.octave=n||""},t=function(e,t){this.clef=e||"";var n=parseInt(t,10)||0;this.clef==="g"?this.octave=4+t:this.clef==="f"&&(this.octave=3+t)}}(StaffPaper);